{"ast":null,"code":"var _jsxFileName = \"/Users/silvergravel/Documents/work_2017/dhmWheels/dhmWebsite/src/App.js\";\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom'; //components\n\nimport Header from './components/header';\nimport Home from './components/pages/home';\nimport About from './components/pages/about';\nimport Cart from './components/pages/cart';\nimport Footer from './components/footer';\nimport CategoryPage from './components/pages/category-page';\nimport ConfigureCastor from './components/configure-castor-page';\nimport ScrollToTop from './components/scroll-to-top'; //stylesheets\n\nimport './styles/css/App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      itemsInCart: \"0\",\n      cartItems: []\n    };\n    this.updateCart = this.updateCart.bind(this);\n    this.deleteCartItem = this.deleteCartItem.bind(this);\n  }\n\n  updateItemsInCartIcon() {\n    var currentItemsInCart = this.state.itemsInCart;\n    currentItemsInCart++;\n    this.setState({\n      itemsInCart: currentItemsInCart\n    });\n    localStorage.setItem(\"itemsInCart\", currentItemsInCart);\n  }\n\n  updateCartComponent(configObject) {\n    this.setState({\n      cartItems: [configObject, ...this.state.cartItems]\n    });\n    var cartItemsConfig = [...this.state.cartItems, configObject];\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItemsConfig));\n  }\n\n  updateCart(configObject) {\n    //check if 'item to add' already exists in the cart.\n    //basically if there is a match of\n    // - Duty\n    // - series\n    // - Material op\n    var repeat = 0;\n    this.state.cartItems.map(item => {\n      item.activeDutyId === configObject.activeDutyId && item.activeSeriesId === configObject.activeSeriesId && item.activematerialOptionsId === configObject.activematerialOptionsId && repeat++;\n    });\n\n    if (repeat > 0) {\n      alert(\"this item already exists in the cart\");\n    } else {\n      this.updateItemsInCartIcon();\n      this.updateCartComponent(configObject);\n    }\n  }\n\n  deleteCartItem(id) {\n    // let arrayIndex = e.target.id;\n    console.log('request to delete item');\n    console.log(this.state.cartItems);\n    console.log(id);\n    var array = [...this.state.cartItems]; // make a separate copy of the array\n\n    array.splice([id], 1);\n    this.setState({\n      cartItems: array\n    });\n    localStorage.setItem(\"cartItems\", JSON.stringify(array));\n    let itemsInCart = this.state.itemsInCart;\n    itemsInCart !== 0 && itemsInCart--;\n    this.setState({\n      itemsInCart: itemsInCart\n    });\n    localStorage.setItem(\"itemsInCart\", itemsInCart);\n  }\n\n  hydrateStateWithLocalStorage() {\n    // for all items in state\n    for (let key in this.state) {\n      // if the key exists in localStorage\n      if (localStorage.hasOwnProperty(key)) {\n        // get the key's value from localStorage\n        let value = localStorage.getItem(key); // parse the localStorage string and setState\n\n        try {\n          value = JSON.parse(value);\n          this.setState({\n            [key]: value\n          });\n        } catch (e) {\n          // handle empty string\n          this.setState({\n            [key]: value\n          });\n        }\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.hydrateStateWithLocalStorage();\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(Router, {\n      onUpdate: () => window.scrollTo(0, 0),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(ScrollToTop, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Header, {\n      itemsInCart: this.state.itemsInCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: Home,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/about\",\n      component: About,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/my-quote-cart\",\n      render: () => React.createElement(Cart, {\n        cartItems: this.state.cartItems,\n        deleteCartItem: this.deleteCartItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/configure/:itemCode\",\n      render: props => React.createElement(ConfigureCastor, Object.assign({}, props, {\n        updateCart: this.updateCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/:categoryName\",\n      render: props => React.createElement(CategoryPage, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    })), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/silvergravel/Documents/work_2017/dhmWheels/dhmWebsite/src/App.js"],"names":["React","Component","BrowserRouter","Router","Switch","Route","Link","Header","Home","About","Cart","Footer","CategoryPage","ConfigureCastor","ScrollToTop","App","constructor","state","itemsInCart","cartItems","updateCart","bind","deleteCartItem","updateItemsInCartIcon","currentItemsInCart","setState","localStorage","setItem","updateCartComponent","configObject","cartItemsConfig","JSON","stringify","repeat","map","item","activeDutyId","activeSeriesId","activematerialOptionsId","alert","id","console","log","array","splice","hydrateStateWithLocalStorage","key","hasOwnProperty","value","getItem","parse","e","componentDidMount","render","window","scrollTo","props"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACEC,aAAa,IAAIC,MADnB,EAEEC,MAFF,EAGEC,KAHF,EAIEC,IAJF,QAKO,kBALP,C,CAOA;;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,YAAP,MAAyB,kCAAzB;AACA,OAAOC,eAAP,MAA4B,oCAA5B;AACA,OAAOC,WAAP,MAAwB,4BAAxB,C,CAIA;;AACA,OAAO,sBAAP;;AAEA,MAAMC,GAAN,SAAkBd,SAAlB,CAA4B;AAE1Be,EAAAA,WAAW,GAAE;AACX;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAE,GADF;AAEXC,MAAAA,SAAS,EAAE;AAFA,KAAb;AAKA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AAED;;AAEDE,EAAAA,qBAAqB,GAAE;AACrB,QAAIC,kBAAkB,GAAG,KAAKP,KAAL,CAAWC,WAApC;AACAM,IAAAA,kBAAkB;AAClB,SAAKC,QAAL,CAAc;AAACP,MAAAA,WAAW,EAACM;AAAb,KAAd;AACAE,IAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCH,kBAApC;AACD;;AAEDI,EAAAA,mBAAmB,CAACC,YAAD,EAAc;AAC/B,SAAKJ,QAAL,CAAc;AACZN,MAAAA,SAAS,EAAC,CACRU,YADQ,EAER,GAAG,KAAKZ,KAAL,CAAWE,SAFN;AADE,KAAd;AAMA,QAAIW,eAAe,GAAG,CAAC,GAAG,KAAKb,KAAL,CAAWE,SAAf,EAAyBU,YAAzB,CAAtB;AACAH,IAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCI,IAAI,CAACC,SAAL,CAAeF,eAAf,CAAlC;AACD;;AAEDV,EAAAA,UAAU,CAACS,YAAD,EAAc;AACtB;AACA;AACA;AACA;AACA;AACA,QAAII,MAAM,GAAG,CAAb;AAEA,SAAKhB,KAAL,CAAWE,SAAX,CAAqBe,GAArB,CAAyBC,IAAI,IAAI;AAC/BA,MAAAA,IAAI,CAACC,YAAL,KAAsBP,YAAY,CAACO,YAAnC,IACAD,IAAI,CAACE,cAAL,KAAwBR,YAAY,CAACQ,cADrC,IAEAF,IAAI,CAACG,uBAAL,KAAiCT,YAAY,CAACS,uBAF9C,IAGAL,MAAM,EAHN;AAID,KALD;;AAQA,QAAGA,MAAM,GAAG,CAAZ,EAAc;AACZM,MAAAA,KAAK,CAAC,sCAAD,CAAL;AACD,KAFD,MAEK;AACH,WAAKhB,qBAAL;AACA,WAAKK,mBAAL,CAAyBC,YAAzB;AACD;AACF;;AAEDP,EAAAA,cAAc,CAACkB,EAAD,EAAI;AAChB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKzB,KAAL,CAAWE,SAAvB;AACAsB,IAAAA,OAAO,CAACC,GAAR,CAAYF,EAAZ;AACA,QAAIG,KAAK,GAAG,CAAC,GAAG,KAAK1B,KAAL,CAAWE,SAAf,CAAZ,CALgB,CAKuB;;AACvCwB,IAAAA,KAAK,CAACC,MAAN,CAAa,CAACJ,EAAD,CAAb,EAAmB,CAAnB;AACA,SAAKf,QAAL,CAAc;AAACN,MAAAA,SAAS,EAAEwB;AAAZ,KAAd;AACAjB,IAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCI,IAAI,CAACC,SAAL,CAAeW,KAAf,CAAlC;AAEA,QAAIzB,WAAW,GAAG,KAAKD,KAAL,CAAWC,WAA7B;AACAA,IAAAA,WAAW,KAAK,CAAhB,IAAqBA,WAAW,EAAhC;AACA,SAAKO,QAAL,CAAc;AAACP,MAAAA,WAAW,EAAEA;AAAd,KAAd;AACAQ,IAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCT,WAApC;AACD;;AAED2B,EAAAA,4BAA4B,GAAG;AAC7B;AACA,SAAK,IAAIC,GAAT,IAAgB,KAAK7B,KAArB,EAA4B;AAC1B;AACA,UAAIS,YAAY,CAACqB,cAAb,CAA4BD,GAA5B,CAAJ,EAAsC;AACpC;AACA,YAAIE,KAAK,GAAGtB,YAAY,CAACuB,OAAb,CAAqBH,GAArB,CAAZ,CAFoC,CAIpC;;AACA,YAAI;AACFE,UAAAA,KAAK,GAAGjB,IAAI,CAACmB,KAAL,CAAWF,KAAX,CAAR;AACA,eAAKvB,QAAL,CAAc;AAAE,aAACqB,GAAD,GAAOE;AAAT,WAAd;AACD,SAHD,CAGE,OAAOG,CAAP,EAAU;AACV;AACA,eAAK1B,QAAL,CAAc;AAAE,aAACqB,GAAD,GAAOE;AAAT,WAAd;AACD;AACF;AACF;AACF;;AAEDI,EAAAA,iBAAiB,GAAG;AAClB,SAAKP,4BAAL;AACF;;AAGAQ,EAAAA,MAAM,GAAG;AAEPZ,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKzB,KAAjB;AAEA,WACE,oBAAC,MAAD;AAAQ,MAAA,QAAQ,EAAE,MAAMqC,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,WAAW,EAAE,KAAKtC,KAAL,CAAWC,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,GAAlB;AAAsB,MAAA,SAAS,EAAEV,IAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,QAAlB;AAA2B,MAAA,SAAS,EAAEC,KAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,gBAAlB;AAAmC,MAAA,MAAM,EAAE,MAAM,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAE,KAAKQ,KAAL,CAAWE,SAA5B;AAAuC,QAAA,cAAc,EAAE,KAAKG,cAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAIE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,sBADP;AAEE,MAAA,MAAM,EAAEkC,KAAK,IAAI,oBAAC,eAAD,oBAAqBA,KAArB;AAA4B,QAAA,UAAU,EAAE,KAAKpC,UAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,EAQE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,gBAAZ;AAA6B,MAAA,MAAM,EAAEoC,KAAK,IAAI,oBAAC,YAAD,oBAAkBA,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,CAFJ,EAYE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZF,CADF,CADF,CADF;AAqBD;;AA3HyB;;AA8H5B,eAAezC,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from 'react-router-dom';\n\n//components\nimport Header from './components/header'\nimport Home from './components/pages/home'\nimport About from './components/pages/about'\nimport Cart from './components/pages/cart'\nimport Footer from './components/footer'\nimport CategoryPage from './components/pages/category-page'\nimport ConfigureCastor from './components/configure-castor-page'\nimport ScrollToTop from './components/scroll-to-top'\n\n\n\n//stylesheets\nimport './styles/css/App.css';\n\nclass App extends Component {\n\n  constructor(){\n    super();\n\n    this.state = {\n      itemsInCart: \"0\",\n      cartItems: []\n    }\n\n    this.updateCart = this.updateCart.bind(this);\n    this.deleteCartItem = this.deleteCartItem.bind(this);\n\n  }\n\n  updateItemsInCartIcon(){\n    var currentItemsInCart = this.state.itemsInCart;\n    currentItemsInCart++;\n    this.setState({itemsInCart:currentItemsInCart});\n    localStorage.setItem(\"itemsInCart\", currentItemsInCart);\n  }\n\n  updateCartComponent(configObject){\n    this.setState({\n      cartItems:[\n        configObject,\n        ...this.state.cartItems\n      ]\n    })\n    var cartItemsConfig = [...this.state.cartItems,configObject];\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItemsConfig));\n  }\n\n  updateCart(configObject){\n    //check if 'item to add' already exists in the cart.\n    //basically if there is a match of\n    // - Duty\n    // - series\n    // - Material op\n    var repeat = 0;\n\n    this.state.cartItems.map(item => {\n      item.activeDutyId === configObject.activeDutyId &&\n      item.activeSeriesId === configObject.activeSeriesId &&\n      item.activematerialOptionsId === configObject.activematerialOptionsId &&\n      repeat++;\n    });\n\n    \n    if(repeat > 0){\n      alert(\"this item already exists in the cart\");\n    }else{\n      this.updateItemsInCartIcon();\n      this.updateCartComponent(configObject)\n    }\n  }\n\n  deleteCartItem(id){\n    // let arrayIndex = e.target.id;\n    console.log('request to delete item');\n    console.log(this.state.cartItems);\n    console.log(id);\n    var array = [...this.state.cartItems]; // make a separate copy of the array\n    array.splice([id], 1);\n    this.setState({cartItems: array});\n    localStorage.setItem(\"cartItems\", JSON.stringify(array));\n\n    let itemsInCart = this.state.itemsInCart;\n    itemsInCart !== 0 && itemsInCart--;\n    this.setState({itemsInCart: itemsInCart});\n    localStorage.setItem(\"itemsInCart\", itemsInCart);\n  }\n\n  hydrateStateWithLocalStorage() {\n    // for all items in state\n    for (let key in this.state) {\n      // if the key exists in localStorage\n      if (localStorage.hasOwnProperty(key)) {\n        // get the key's value from localStorage\n        let value = localStorage.getItem(key);\n\n        // parse the localStorage string and setState\n        try {\n          value = JSON.parse(value);\n          this.setState({ [key]: value });\n        } catch (e) {\n          // handle empty string\n          this.setState({ [key]: value });\n        }\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.hydrateStateWithLocalStorage();\n }\n\n\n  render() {\n\n    console.log(this.state);\n\n    return (\n      <Router onUpdate={() => window.scrollTo(0, 0)}>\n        <ScrollToTop>\n          <div className=\"App\">\n            <Header itemsInCart={this.state.itemsInCart}/>\n              <Switch>\n                <Route exact path='/' component={Home} />\n                <Route exact path='/about' component={About} />\n                <Route exact path='/my-quote-cart' render={() => <Cart cartItems={this.state.cartItems} deleteCartItem={this.deleteCartItem} /> } />\n                <Route\n                  path='/configure/:itemCode'\n                  render={props => <ConfigureCastor {...props} updateCart={this.updateCart} /> }\n                />\n                <Route path='/:categoryName' render={props => <CategoryPage {...props} /> } />\n              </Switch>\n            <Footer/>\n          </div>\n          </ScrollToTop>\n      </Router>\n\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}